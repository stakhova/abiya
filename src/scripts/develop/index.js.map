{"version":3,"sources":["develop/index.js"],"names":["url","window","location","origin","button","validateForm","form","func","on","e","preventDefault","console","log","has","$","validator","addMethod","value","element","optional","test","validate","rules","username","required","email","goodEmail","category","name","phone","location_name","link","date","note","password","passwordNew","minlength","passwordNewRepeat","equalTo","terms","percentage","messages","maxLength","passwordNew_confirm","submitHandler","hasClass","startDate","Date","text","split","reverse","join","endDate","inputDate","val","after","formatDate","remove","reset","find","valid","day","String","getDate","padStart","month","getMonth","year","getFullYear","ajaxSend","funcSuccess","funcError","data","serialize","ajax","method","success","res","error","complete","tab","click","removeClass","eq","index","addClass","hide","fadeIn","progressBar","allTasks","length","acceptTasks","percent","toFixed","notesPercent","css","addPercentStyle","each","result","wrap","closest","changeMob","innerWidth","progress","append","resetModal","show","project","toogleModal","btn","modal","openPopupFunction","document","keydown","keyCode","stopPropagation","target","checkbox","subtasks","checkWrap","forEach","subtask","itemHtml","trim","allChecked","is","appendToModalData","info","task_id","attr","desc","img","template","instruction","managers","number1","number2","part1","part2","managerList","manager","html","addMoreFile","showInstruction","load","trigger","cloneFileName","clone","before","appendInfoAboutClarify","editNotes","deleteNotesOrFile","page","loadMore","action","mob","obj","fileListContainer","updateFileListDisplay","fileList","empty","file","fileName","deleteButton","indexToRemove","updatedFileList","Array","from","splice","event","files","FileList","listItem","showMobTask","table","elem","prev","next","disabledBtn","active","successFormData","submitFormDataProject","taskId","currentTask","fileProject","messageProject","formData","FormData","key","delete","uploadedFiles","contentType","processData","cache","newStatus","status","classes","i","classDelete","submitFormDataNotes","title","nodeId","prepend","replaceWith","search","searchText","showLogOut","toggleClass","showSearch","clearTimeout","timer","setTimeout","openMenu","item","id","note_id","item_id","off","deleteFileFromModal","content","approveFile","currentButton","choice","nextAll","prevAll","deleteJustUploadFile","noteId","role","uploadAndDeleteFiles","list","uploadFile","updateFileList","uploadInterval","setInterval","Math","random","clearInterval","push","loginPopupChange","href","includes","closeModal","openModalFromEmail","urlString","URL","searchParams","get","ready","loginForm","redirect_url","errorrr","responseJSON","loginForget","passwordReset","resize","scroll"],"mappings":"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","file":"index.js","sourcesContent":["let url = window.location.origin + '/wp-content/themes/Abiya/img/'\nlet button;\n\nconst validateForm = (form, func) => {\n    form.on(\"submit\", function (e) {\n        e.preventDefault();\n\n        console.log(1212121,form.has('.modal__calendar'))\n\n    });\n    $.validator.addMethod(\"goodMessage\", function (value, element) {\n        return this.optional(element) || /^[\\sаА-яЯіІєЄїЇґҐa-zA-Z0-9._-]{2,100}$/i.test(value);\n    }, \"Please enter correct\");\n\n    $.validator.addMethod(\"goodEmail\", function (value, element) {\n        return this.optional(element) || /^([a-z0-9_-]+\\.)*[a-z0-9_-]+@[a-z0-9_-]+(\\.[a-z0-9_-]+)*\\.[a-z]{2,62}$/i.test(value);\n    }, \"Please enter correct email\");\n\n    form.validate({\n        rules: {\n            username: {\n                required: true\n                // goodMessage: true,\n            },\n            email: {\n                required: true,\n                goodEmail: true,\n                email: true\n            },\n            category:{\n                required: true,\n            },\n            name:{\n                required: true,\n            },\n            phone:{\n                required: true,\n            },\n            location_name:{\n                required: true,\n            },\n            location:{\n                required: true,\n            },\n            link: {\n                required: true,\n            },\n            date:{\n                required: true,\n            },\n            note: {\n                required: true,\n            },\n            password: {\n                required: true\n            },\n            passwordNew: {\n                required: true,\n                minlength: 8\n            },\n            passwordNewRepeat: {\n                required: true,\n                minlength: 8,\n                equalTo: \"#passwordNew\"\n            },\n            terms:{\n                required: true,\n            },\n            percentage:{\n                required: true,\n            }\n\n        },\n        messages: {\n            username: {\n                required: \"This field is required\",\n                email: \"Please enter correct username\"\n            },\n            email: {\n                required: \"This field is required\",\n                email: \"Please enter correct email\"\n            },\n            password: {\n                required: \"This field is required\",\n                minlength: \"First name can't be shorter than 2 characters\",\n                maxLength: \"First name can't be longer than 100 characters \"\n            },\n            passwordNew: {\n                required: \"This field is required\",\n                minlength: \"Password can't be shorter than 8 characters\"\n            },\n            passwordNew_confirm: {\n                required: \"This field is required\",\n                equalTo: \"Password not equal\"\n            },\n            location_name:{\n                required: \"This field is required\",\n            },\n            location:{\n                required: \"This field is required\",\n            },\n            link:{\n                required: \"This field is required\",\n            },\n            category:{\n                required: \"This field is required\",\n            },\n            name:{\n                required: \"This field is required\",\n            },\n            phone:{\n                required: \"This field is required\",\n            },\n            date:{\n                required: \"This field is required\",\n            },\n            note: {\n                required: \"This field is required\",\n            },\n            terms:{\n                required: \"This field is required\",\n            },\n            percentage:{\n                required: \"This field is required\",\n            }\n\n        },\n        submitHandler: function () {\n\n\n            if( form.hasClass('.modal__calendar') ){\n                let startDate = new Date($('.calendar__start .date').text().split('/').reverse().join('/'));\n                let endDate = new Date($('.calendar__end .date').text().split('/').reverse().join('/'));\n                let inputDate = new Date($('#date_add').val().split('/').reverse().join('/'));\n                if (inputDate < startDate || inputDate > endDate) {\n                    $('#date_add').after(`<p class=\"error\">The date must be within the range of ${formatDate(startDate)} and ${formatDate(endDate)}</p>`)\n                    return false;\n                }else{\n                    $('p.error').remove()\n                    func();\n                }\n            }else{\n                func();\n            }\n            form[0].reset();\n            // form.find('select').val(null).trigger('change');\n        }\n    });\n    form.find('select').on('change', function () {\n        $(this).valid(); // Trigger validation for the select element\n    });\n\n};\nfunction formatDate(date) {\n    let day = String(date.getDate()).padStart(2, '0');\n    let month = String(date.getMonth() + 1).padStart(2, '0');\n    let year = date.getFullYear();\n    return day + '/' + month + '/' + year;\n}\nfunction ajaxSend(form, funcSuccess, funcError) {\n    let data = form.serialize();\n    $.ajax({\n        url: '/wp-admin/admin-ajax.php',\n        data: data,\n        method: 'POST',\n        success: function (res) {\n            console.log('success ajax');\n            funcSuccess(res);\n        },\n        error: function (error) {\n            console.log('error ajax');\n            funcError(error);\n        },\n        complete: function () {}\n    });\n}\n\nfunction tab() {\n    $(\".tab__header-item\").click(function () {\n        $(\".tab__header-item\").removeClass(\"active\").eq($(this).index()).addClass(\"active\");\n        $(\".tab__content-item\").hide().eq($(this).index()).fadeIn();\n    }).eq(0).addClass(\"active\");\n}\n\nfunction progressBar() {\n    let allTasks = $('.task').length;\n    let acceptTasks = $('.task.accept').length;\n    let percent = (acceptTasks * 100 / allTasks).toFixed(2);\n    $('.project__wrap .project__top .project__percent span').text(percent);\n    let notesPercent = $('.notes .project__top .project__percent span').text();\n    $('.project__wrap .project__progress-bar').css('width', `${percent}%`);\n    $('.notes .project__progress-bar').css('width', `${notesPercent}%`);\n}\n\nfunction addPercentStyle() {\n    $('.project__percent span').each(function () {\n        let result = $(this).text();\n        let wrap = $(this).closest('.project__percent');\n        if (result == '0') {\n            wrap.addClass('zero');\n        }\n        if (result == '100') {\n            wrap.addClass('full');\n        }\n    });\n}\n\nfunction changeMob() {\n    if (window.innerWidth <= 666) {\n        let progress = $('.project__progress');\n        let wrap = $('.project__top');\n        wrap.find('.project__top-block:first-child').after(progress);\n        $('.project__table td').each(function () {\n            if ($(this).find('*').length == 0) {\n                $(this).closest('td').remove();\n            }\n        });\n\n        $('.project__table-task .project__task-time').each(function () {\n\n            $(this).closest('tr').append(`<td></td>`);\n            $(this).closest('tr').find('td:last-child').append($(this));\n        });\n    }\n}\n\nfunction resetModal() {\n    $('.modal__content-clarify').show();\n    $('.modal__content-delete').hide();\n    $('.modal__content-approve').hide();\n\n\n    $('.form__file-list > *').remove();\n    $('.file__input').val('');\n    $('.form__file-upload').removeClass('disabled')\n\n    $('.form__check > *').remove()\n\n    let project = $('.project__top .project__top-title').text();\n    $('.modal__notes .project__top-title').text(`New Note For \"${project}\"`);\n    $(\".form__input input:not(.modal__datepicker)\").val(\"\");\n    $('.form__input textarea').val(\"\");\n\n    $('.location__more-block').hide();\n    $('.location__more').show();\n}\n\nfunction toogleModal(btn, modal) {\n    btn.click(function () {\n        button = $(this);\n        openPopupFunction();\n        modal.show();\n        $('body').addClass('hidden');\n        return false;\n    });\n    $('.modal__close').click(function () {\n        $(this).closest(modal).hide();\n        $('body').removeClass('hidden');\n        resetModal();\n        return false;\n    });\n    $('.modal__btn-close').click(function () {\n        $(this).closest(modal).hide();\n        $('body').removeClass('hidden');\n        resetModal();\n        return false;\n    });\n    $(document).keydown(function (e) {\n        if (e.keyCode === 27) {\n            e.stopPropagation();\n            resetModal();\n            $('body').removeClass('hidden');\n        }\n    });\n    modal.click(function (e) {\n        if ($(e.target).closest('.modal__content').length == 0) {\n            $(this).hide();\n            resetModal();\n            $('body').removeClass('hidden');\n        }\n    });\n}\nfunction checkbox(subtasks){\n    let checkWrap = $('.form__check');\n    subtasks.forEach(function(subtask, index) {\n        let itemHtml = `\n                    <div class=\"form__check-item\">\n                        <input type=\"checkbox\" id=\"check${index + 1}\">\n                        <label for=\"check${index + 1}\">${subtask.trim()}</label>\n                    </div>\n                `;\n        checkWrap.append(itemHtml);\n    });\n    $('.form__check').append(`<p class=\"form__file-hint\" >Selection is required</p>`)\n\n    $('.form__file-upload').addClass('disabled')\n    $('.form__check input[type=\"checkbox\"]').on('change', function() {\n        let allChecked = true;\n\n        $('.form__check input[type=\"checkbox\"]').each(function() {\n            if (!$(this).is(':checked')) {\n                allChecked = false;\n                return false;\n            }\n        });\n\n        if (allChecked) {\n            $('.form__file-upload').removeClass('disabled')\n            $('.form__check .form__file-hint').remove();\n        } else {\n            $('.form__check').append(`<p class=\"form__file-hint\" > Selection is required</p>`)\n            $('.form__file-upload').addClass('disabled')\n        }\n    });\n}\nfunction appendToModalData() {\n    let info = button.find('.project__task ');\n    let task_id = button.attr('data-taskId');\n    $('input[name=\"task_id\"]').val(task_id)\n\n    let desc = info.data('desc');\n    let img = info.data('img');\n    let template = info.data('template_link');\n    let instruction = info.data('instruction');\n    let subtasks = info.data('subtasks');\n\n\n    if(subtasks){\n        checkbox(subtasks)\n    }\n\n\n    let managers = info.data('manager').split(',');\n    let number1 = info.closest('tr').index() + 1;\n    let number2 = info.closest('td').index();\n    let part1 = info.closest('tr').find('.project__task-step h3').text();\n    let part2 = info.find('.project__task-title').text();\n\n    let managerList = '';\n    managers.forEach(function (manager) {\n        managerList += '<span>' + manager.trim() + '</span>';\n    });\n\n    $('.project__manager-list').html(managerList);\n\n    if(template !== ''){\n\n        $('.modal .project__top-template').attr('href', template).addClass('show');\n    }\n\n    if(instruction !== ''){\n        $('.modal .project__top-info').attr('data-url', instruction).addClass('show');;\n\n    }else{\n        $('.modal .project__top-info').attr('data-url', '').removeClass('show');\n    }\n\n\n    $('.modal .project__top-icon img').attr('src', img);\n    $('.project__modal-desc p').text(desc);\n    $('.project__modal-title').html(`<span>Stage ${number1}. ${part1}</span>Step ${number2}. ${part2}`);\n    addMoreFile();\n}\n\n\nfunction showInstruction(){\n    $(document).on('click','.project__top-info',function (){\n        let url = $(this).attr('data-url')\n        $('.modal__video source').attr('src',url)\n        $('.modal__video video')[0].load()\n\n        let modal =  $('.modal__instruction')\n        modal.show();\n\n        $('.modal__close').click(function () {\n            $(this).closest(modal).hide();\n            $('video').trigger('pause');\n\n        });\n        $(document).keydown(function (e) {\n            if (e.keyCode === 27) {\n                $('video').trigger('pause');\n                e.stopPropagation();\n\n            }\n        });\n        modal.click(function (e) {\n            if ($(e.target).closest('.modal__content').length == 0) {\n                $('video').trigger('pause');\n                $(this).hide();\n\n            }\n        });\n\n    })\n}\n\nfunction openPopupFunction() {\n    let cloneFileName = button.closest('.notes__file-item').clone();\n    $('.modal__delete .notes__file-item').remove();\n    $('.modal__delete .modal__btn').before(cloneFileName);\n    $('.modal__content-delete .modal__btn').before(cloneFileName);\n\n    if (button.hasClass('task')) {\n        appendToModalData();\n    }\n    if (button.hasClass('clarify') || button.hasClass('accept') ) {\n        appendInfoAboutClarify(button);\n    }\n    if (button.hasClass('notes__top-edit')) {\n        editNotes(button);\n    }\n    if (button.hasClass('notes__top-delete')) {\n        deleteNotesOrFile(button, '.notes__item', 'delete__notes');\n    }\n    if (button.hasClass('notes__file-delete')) {\n        deleteNotesOrFile(button, '.notes__file-item', 'delete__file-note');\n    }\n    if (button.hasClass('notes__button')) {\n        $('.modal__notes input[name=note_id]').val('')\n        $('.project__top-title').text('Add new note')\n        $('.form__input input').val(\"\");\n        $('.form__input textarea').val(\"\");\n    }\n\n}\n\nlet page = 1;\nfunction loadMore(action, btn) {\n    $(document).on('click', btn, function () {\n        let btn = $(this);\n        let wrap = btn.closest('.tab__content-item');\n        let category = wrap.attr('data-category');\n        let page = wrap.attr('data-page');\n        page++;\n\n        let mob;\n        window.innerWidth > 666 ? mob = 0 : mob = 1\n\n        wrap.attr('data-page', page);\n        let obj = { action, page, category, mob};\n        $.ajax({\n            url: '/wp-admin/admin-ajax.php',\n            data: obj,\n            method: 'POST',\n            success: function (res) {\n                btn.closest('tbody').append(res);\n                btn.closest('.project__load').remove();\n                wrap.find('.notification__mob').append(res);\n            },\n            error: function (error) {\n                console.log('error ajax');\n            },\n            complete: function () {}\n        });\n    });\n}\n\nlet fileListContainer = $('.form__file-list');\n\nfunction updateFileListDisplay(fileList) {\n    fileListContainer.empty();\n    $.each(fileList, function (index, file) {\n        let fileName = file.name;\n        let deleteButton = $(`<button type=\"button\" class=\"notes__file-delete img\"><img src=\"${url}delete.svg\" alt=\"\"></button>`);\n        deleteButton.data('index', index);\n        deleteButton.on('click', function () {\n            let indexToRemove = $(this).data('index');\n            let updatedFileList = Array.from(fileList);\n            updatedFileList.splice(indexToRemove, 1);\n            $(this).closest('.form__file-item').remove();\n            event.target.files = new FileList(updatedFileList);\n        });\n\n\n\n        let listItem = $(`<div class=\"form__file-item\"><h3>Uploaded ${fileName}</h3></div>`).append(deleteButton);\n        fileListContainer.append(listItem);\n    });\n}\n\nfunction showMobTask(table, elem, prev, next) {\n    $(`${table} ${elem}:first-of-type`).addClass('active');\n\n    $(prev).addClass('disabled');\n\n\n    function disabledBtn() {\n        if (!$(`${table} ${elem}:first-child`).hasClass('active')) {\n            $(prev).removeClass('disabled');\n            console.log(1111)\n        } else {\n            $(prev).addClass('disabled');\n            console.log(2222)\n        }\n        if (!$(`${table} ${elem}:last-child`).hasClass('active')) {\n            $(next).removeClass('disabled');\n            console.log(3333)\n        } else {\n            $(next).addClass('disabled');\n            console.log(4444)\n        }\n    }\n    $(document).on('click', next, function () {\n        let active = $(`${table} ${elem}.active`);\n        let next = active.next(`${table} ${elem}`);\n        active.removeClass('active');\n        next.addClass('active');\n        disabledBtn();\n    });\n    $(document).on('click', prev, function () {\n        let active = $(`${table} ${elem}.active`);\n        let prev = active.prev(`${table} ${elem}`);\n        active.removeClass('active');\n        prev.addClass('active');\n        disabledBtn();\n    });\n}\n\n\nfunction successFormData(){\n\n}\n\nfunction submitFormDataProject(form) {\n    $(document).on('submit', form, function (e) {\n        console.log(1122)\n        e.preventDefault();\n        let taskId = $(this).find('input[name=task_id]').val()\n        let currentTask\n        $('.task').each(function (){\n            if($(this).attr('data-taskId') == taskId){\n                currentTask = $(this)\n            }\n        })\n        let fileProject = $(this).closest('.modal__task').find('input[type=\"file\"]')\n        let messageProject = $(this).closest('.modal__task').find('input[name=\"notes\"]')\n        let required = false\n\n\n\n        if (!messageProject.val()) {\n            e.preventDefault();\n            $('.modal__task .form__input').append(`<p class=\"form__file-hint\" >Notes is required</p>`)\n        } else {\n            $('.modal__task .form__file-hint').remove()\n            required = true;\n        }\n        console.log(11111,fileProject.val(), fileProject.length > 0 , fileProject.val()!==\"\" , required)\n        if(fileProject.length > 0 && fileProject.val()!==\"\" && required){\n            let formData = new FormData($(this)[0]);\n            formData.forEach(function(value, key) {\n                if (key === 'file[]') {\n                    formData.delete(key);\n                }\n            });\n            uploadedFiles.forEach(function(file, index) {\n                formData.append('file[]', file);\n            });\n            $('.preloader__wrap').show()\n\n            $.ajax({\n                url: '/wp-admin/admin-ajax.php',\n                data: formData,\n                method: 'POST',\n                contentType: false,\n                processData: false,\n                cache: false,\n                success: function (res) {\n\n                    let newStatus = res.data.status\n                    let classes = currentTask.attr('class').split(' ');\n                    for(let i = 0; i < classes.length; i++){\n                        if(classes[i] !== 'task'){\n                            let classDelete = classes[i]\n                            currentTask.removeClass(classDelete);\n                        }\n                    }\n                    currentTask.addClass(newStatus)\n\n                    $('.modal').hide();\n                    $('body').removeClass('hidden');\n                    $('.form__file-list > *').remove();\n                    $('.file__input').val('');\n                    $('.form__input input').val(\"\");\n                    $('.form__input textarea').val(\"\");\n                    uploadedFiles = []\n                    $('.form__check > *').remove();\n                    $('.preloader__wrap').hide()\n                },\n                error: function (error) {\n                    console.log('error ajax222');\n\n                },\n            });\n        } else{\n            if($('.form__file-upload .form__file-hint').length == 1){\n                $('.form__file-upload .form__file-hint').remove()\n            }\n            if($('.form__file-upload .form__file-hint').length == 0  && fileProject.val()==\"\"){\n                $('.form__file-upload').append(`<p class=\"form__file-hint\" > File is required</p>`)\n            }\n\n        }\n\n\n    });\n    $(document).on('change','.modal__task input[type=file]', function (){\n        $('.form__file-hint').remove()\n    })\n}\nfunction submitFormDataNotes(form) {\n\n\n\n    $(document).on('submit', form, function (e) {\n        e.preventDefault();\n        let title = $(this).find('input[name=\"title\"]')\n        let text = $(this).find('textarea[name=\"text\"]')\n\n        $(document).on('input','.modal__notes input[name=\"title\"], .modal__notes textarea[name=\"text\"]', function (){\n            if($(this).val()!==\"\"){\n                $(this).closest('.form__input').find('.form__file-hint').remove()\n            } else{\n                $(this).closest('.form__input').append(`<p class=\"form__file-hint\" >Title is required</p>`)\n            }\n        })\n\n        if(title.val() == \"\"){\n            title.closest('.form__input').append(`<p class=\"form__file-hint\" >Title is required</p>`)\n        }\n        if(text.val() == \"\"){\n            text.closest('.form__input').append(`<p class=\"form__file-hint\" >Text is required</p>`)\n        }\n\n        if(title.val() !==\"\" && text.val() !==\"\"){\n            let nodeId = $(form).find($('input[name=\"note_id\"]')).val()\n            let formData = new FormData($(this)[0]);\n            formData.forEach(function(value, key) {\n                if (key === 'file[]') {\n                    formData.delete(key);\n                }\n            });\n            uploadedFiles.forEach(function(file, index) {\n                formData.append('file[]', file);\n            });\n            $.ajax({\n                url: '/wp-admin/admin-ajax.php',\n                data: formData,\n                method: 'POST',\n                contentType: false,\n                processData: false,\n                cache: false,\n                success: function (res) {\n\n                    $('.modal').hide();\n                    $('body').removeClass('hidden');\n                    $('.form__file-list > *').remove();\n                    $('.file__input').val('');\n                    uploadedFiles = []\n                    // $(form)[0].reset();\n\n                    // if($('.notes').length > 0){\n                    $('.form__input input').val(\"\");\n                    $('.form__input textarea').val(\"\");\n\n                    if (nodeId == ''){\n\n                        $('.notes__block').prepend(res);\n                    } else{\n                        $('.notes__item').each(function (){\n                            if($(this).attr('data-id')  == nodeId){\n                                $(this).replaceWith(res)\n                            }\n                        })\n                    }\n                    openPopupFunction();\n                    toogleModal($('.notes__top-edit'), $('.modal__notes'));\n                    toogleModal($('.notes__top-delete'), $('.modal__delete'));\n                    // }\n\n                },\n                error: function (error) {\n                    console.log('error ajax222');\n\n                },\n            });\n        }\n    });\n}\n\nfunction search() {\n    let data = $('.project__search').serialize();\n    let searchText = $('.project__search-input input').val();\n    if (searchText.length < 1) {\n        $('.project__search-result').hide();\n    } else {\n        $('.project__search-result').show();\n    }\n    $.ajax({\n        url: '/wp-admin/admin-ajax.php',\n        data: data,\n        method: 'POST',\n        success: function (res) {\n            console.log('success ajax');\n            $('.project__search-list').html(res);\n        },\n        error: function (error) {\n            console.log('error ajax');\n        },\n        complete: function () {}\n    });\n}\n\n\nfunction showLogOut(){\n    $(document).on('click','.header__user-img', function (){\n        $('.header__user-wrap').toggleClass('show')\n    })\n}\nfunction showSearch() {\n    $(document).on('keydown', '.project__search-input input', function () {\n        clearTimeout($(this).data('timer'));\n        let timer = setTimeout(function () {\n            search();\n        }, 500);\n        $(this).data('timer', timer);\n    });\n\n    $(document).on('submit', '.project__search', function (e) {\n        e.preventDefault();\n        search();\n    });\n    $(document).on('input', '.project__search-input input', function () {\n        if ($(this).is(\":focus\")) {\n            $('.project__search').addClass('focused');\n        } else {\n            $('.project__search').removeClass('focused');\n        }\n    });\n}\n\nconst openMenu = () => {\n    $('.header__burger').toggleClass(\"header__burger-open\");\n    $('.header__menu').toggleClass('header__menu-show');\n    $('body').toggleClass('hidden');\n};\n\nfunction deleteNotesOrFile(btn, item, action) {\n    let note = btn.closest(item);\n    let id = note.data('id');\n    let note_id = btn.closest('.notes__item').data('id')\n    let obj = { action: action, item_id: id, note_id };\n    $(document).off('click', '.modal__btn-delete');\n    $(document).on('click', '.modal__btn-delete', function () {\n        $.ajax({\n            url: '/wp-admin/admin-ajax.php',\n            data: obj,\n            method: 'POST',\n            success: function () {\n                console.log('success ajax444');\n                note.remove();\n                $('body').removeClass('hidden');\n                $('.modal').hide();\n            },\n\n            error: function (error) {\n                console.log('error ajax444');\n                note.remove();\n                $('body').removeClass('hidden');\n                $('.modal').hide();\n            },\n            complete: function () {}\n        });\n    });\n}\n\nfunction addMoreFile() {\n    $(document).on('click', '.project__clarify-more', function () {\n        $('.modal__task-clarify').hide();\n        $('.modal__task').show();\n    });\n}\n\nfunction deleteFileFromModal(btn, content) {\n    $(document).on('click', btn, function () {\n        $(this).closest('.modal__content').hide();\n        content.show();\n        let item = $(this).closest('.project__clarify-flex');\n        let id = item.data('id');\n        let task_id = $('.modal__task-clarify input[name=task_id]').val();\n        let obj = { action: 'delete__file-clarify', item_id: id, task_id };\n        $(document).off('click', '.modal__btn-delete');\n        $(document).on('click', '.modal__btn-delete', function () {\n            $.ajax({\n                url: '/wp-admin/admin-ajax.php',\n                data: obj,\n                method: 'POST',\n                success: function () {\n                    console.log('success ajax1111');\n                    if (window.innerWidth <= 666) {\n                        $(item).closest('tbody.active').remove();\n                        $('.clarify__mob-wrap tbody:first-child').addClass('active');\n                    }\n                    $(item).closest('tr').remove();\n                    $('.modal__content-delete').hide();\n                    $('.modal__content-clarify').show();\n                },\n                error: function (error) {\n                    console.log('error ajax111');\n                    if (window.innerWidth <= 666) {\n                        $(item).closest('tbody.active').remove();\n                        $('.clarify__mob-wrap tbody:first-child').addClass('active');\n                        $('.clarify__mob-prev').addClass('disabled');\n                    }\n                    $(item).closest('tr').remove();\n                    $('.modal__content-delete').hide();\n                    $('.modal__content-clarify').show();\n                },\n                complete: function () {}\n            });\n        });\n    });\n}\n\nfunction approveFile(btn, content) {\n    $(document).on('click', btn, function () {\n        let currentButton = $(this);\n        currentButton.closest('.modal__content').hide();\n        content.show();\n        let item;\n        if (window.innerWidth > 666) {\n            item = currentButton.closest('tr');\n        } else {\n            item = currentButton.closest('tbody');\n        }\n        let id = item.data('id');\n        let choice = currentButton.text();\n        $('.modal__manager .modal__title span').text(choice);\n        let task_id = $(this).closest('.modal').find('input[name=\"task_id\"]').val()\n        let obj = { action: 'aprove-reject-file', item_id: id, task_id, choice };\n\n        $(document).off('click', '.modal__btn-approve');\n        $(document).on('click', '.modal__btn-approve', function () {\n            $.ajax({\n                url: '/wp-admin/admin-ajax.php',\n                data: obj,\n                method: 'POST',\n                success: function () {\n                    console.log('success ajax-approve');\n                    $('.modal__content-approve').hide();\n                    $('.modal__content-clarify').show();\n                    currentButton.addClass('active');\n                    currentButton.nextAll().remove();\n                    currentButton.prevAll().remove();\n                },\n                error: function (error) {\n                    console.log('error ajax-approve');\n                    $('.modal__content-approve').hide();\n                    $('.modal__content-clarify').show();\n                    currentButton.addClass('active');\n                    currentButton.nextAll().remove();\n                    currentButton.prevAll().remove();\n                },\n            });\n        });\n    });\n}\n\nfunction deleteJustUploadFile() {\n\n    $(document).on('click', '.form__file .notes__file-delete', function () {\n        $(this).closest('.form__file-item').remove();\n    });\n    // $('#upload').on('change', function(event) {\n    //     let fileList = event.target.files;\n    //     let fileListContainer = $('.form__file-list');\n    //     fileListContainer.empty();\n    //\n    //     $.each(fileList, function(index, file) {\n    //         let fileName = file.name;\n    //         let deleteButton = $('<button>Delete</button>');\n    //         deleteButton.data('index', index); // Set index as data attribute\n    //         deleteButton.on('click', function() {\n    //             let indexToRemove = $(this).data('index');\n    //             let updatedFileList = Array.from(fileList);\n    //             updatedFileList.splice(indexToRemove, 1); // Remove the file from the list\n    //             event.target.files = new FileList(updatedFileList); // Assign the updated file list to input\n    //             $(event.target).trigger('change'); // Trigger change event to update file list\n    //         });\n    //\n    //         let listItem = $('<div></div>').text(fileName).append(deleteButton);\n    //         fileListContainer.append(listItem);\n    //     });\n    // });\n}\n\nfunction editNotes(btn) {\n    let title = btn.closest('.notes__top').find('.notes__title').text();\n    let desc = btn.closest('.notes__item').find('.notes__desc').text().trim();\n    let noteId = btn.closest('.notes__item').attr('data-id');\n    $('.modal__notes input[name=\"title\"]').val(title);\n    $('.modal__notes input[name=\"note_id\"]').val(noteId);\n    $('.modal__notes textarea[name=\"text\"]').val(desc);\n    $('.modal__notes .project__top-title').text(`Edit ${title}`);\n}\n\n// function uploadFileTest(){\n//\n//     let input = $('#file-input');\n//     let container = $('#file-container');\n//     input.on('change', async function(evt) {\n//         let files = $(this).prop('files');\n//         for (let file of files) {\n//             let elem = $('<div class=\"file-info\"><p>' + file.name + '</p><progress class=\"progress-bar\" max=\"100\" value=\"0\"></progress></div>').appendTo(container);\n//             //добавляем инфу о файле в свойство превью\n//             elem.get(0).file = file;\n//         }\n//         evt.preventDefault();\n//         //пускаем закачку каждого файла параллельно с помощью Promise.all и дожидаемся закачки всех файлов с помощью await.\n//         await Promise.all($('.file-info').map(upload));\n//         console.log('готово');\n//     });\n//\n//     async function upload(index, elem) {\n//         let data = new FormData();\n//         data.append('file', elem.file);\n//         let progress = $(elem).find('.progress-bar');\n//         //ждем ответа об успешной обработке файла на стороне сервера\n//         const res = await $.ajax({\n//             url: '/',\n//             contentType: false,\n//             processData: false,\n//             data: data,\n//             type: 'post',\n//             xhr: function() {\n//                 let xhr = new XMLHttpRequest();\n//                 xhr.upload.onprogress = function(evt) {\n//                     let percent = Math.ceil(evt.loaded / evt.total * 100);\n//                     progress.attr('value', percent);\n//                 }\n//                 return xhr;\n//             }\n//         });\n//     }\n// }\n\n\nfunction appendInfoAboutClarify(button) {\n    let task_id = button.attr('data-taskId');\n    let role = $('.project__wrap').attr('data-role');\n    $('input[name=\"task_id\"]').val(task_id)\n\n\n    if((button).hasClass('accept')){\n        $('.project__clarify-more').hide()\n    }else{\n        $('.project__clarify-more').show()\n    }\n\n    let obj = { action: 'append-clarify-info', task_id, role };\n    $.ajax({\n        url: '/wp-admin/admin-ajax.php',\n        data: obj,\n        method: 'POST',\n        success: function (res) {\n            console.log('success ajax-append');\n            $('.project__table-clarify').replaceWith(res);\n\n            if( $('.clarify__mob-wrap tbody').length/2 == 1 ){\n\n\n                $('.clarify__mob-next').addClass('disabled');\n            }\n        },\n        error: function (error) {\n            console.log('error ajax-append');\n            $('.project__table-clarify').replaceWith(res);\n        },\n    });\n}\n\n\nlet uploadedFiles = []\nfunction uploadAndDeleteFiles() {\n    // <div className=\"form__file-item\"><h3>Uploaded ${fileName}</h3><button type=\"button\" className=\"notes__file-delete img\"><img src=\"../../img/delete.svg\" alt=\"\"></button>\n    let list\n    $('.file__input').on('change', function () {\n        let files = $(this)[0].files;\n        list = $(this).closest('.form').find('.file__list')\n        for (let i = 0; i < files.length; i++) {\n            uploadFile(files[i]);\n        }\n    });\n\n    $(document).on('click', '.deleteFile', function () {\n        let index = $(this).data('index');\n        uploadedFiles.splice(index, 1);\n        updateFileList();\n    });\n\n    function uploadFile(file) {\n        let progress = 0;\n        let progressBar = $('<div class=\"progressBar\"></div>');\n        let listItem = $('<li class=\"form__file-item\"> <h3>' + file.name + '</h3></li>').append(progressBar);\n        list.append(listItem);\n\n        let uploadInterval = setInterval(function () {\n            progress += Math.random() * 10;\n            if (progress >= 100) {\n                clearInterval(uploadInterval);\n                progressBar.css('display', 'none');\n                listItem.append(`<button class=\"deleteFile notes__file-delete img\" data-index=\"' + uploadedFiles.length + '\"><img src=\"${url}delete.svg\" alt=\"\"></button>`);\n                uploadedFiles.push(file);\n\n            } else {\n                progressBar.css('width', progress + '%');\n            }\n        }, 20);\n    }\n    function updateFileList() {\n        list.empty();\n        for (let i = 0; i < uploadedFiles.length; i++) {\n            let fileName = uploadedFiles[i].name;\n            list.append(`<li class=\"form__file-item\"> <h3>${fileName}</h3><button class=\"deleteFile notes__file-delete img\" data-index=\"${i}\">  <img src=\"${url}delete.svg\" alt=\"\"></button></li>`);\n        }\n    }\n}\n\nfunction loginPopupChange() {\n    $(document).on('click', '.login__forget', function () {\n        $(this).closest('.login__form').removeClass('active');\n        $('.login__form-forget').addClass('active');\n    });\n    $(document).on('click', '.login__remember', function () {\n        $(this).closest('.login__form').removeClass('active');\n        $('.login__signin').addClass('active');\n    });\n    if (window.location.href.includes('set_new_password')) {\n        $('.login__form').removeClass('active');\n        $('.login__form-recovery').addClass('active');\n    } else {\n        $('.login__signin').addClass('active');\n    }\n}\n\nfunction closeModal(modal) {\n    $('body').css('overflow', 'hidden');\n    $('.modal__close').click(function () {\n        $(this).closest(modal).hide();\n        $('body').css('overflow', 'visible');\n        return false;\n    });\n    $(document).keydown(function (e) {\n        if (e.keyCode === 27) {\n            e.stopPropagation();\n            modal.hide();\n            $('body').css('overflow', 'visible');\n        }\n    });\n    modal.click(function (e) {\n        if ($(e.target).closest('.modal__content').length == 0) {\n            $(this).hide();\n            $('body').css('overflow', 'visible');\n        }\n    });\n}\n\nfunction openModalFromEmail(){\n    if(window.location.href.includes('task_id')){\n        let urlString = location.href;\n        let url = new URL(urlString);\n        let task_id = url.searchParams.get(\"task_id\");\n\n\n        let modal = $('.modal__task-clarify')\n\n        let role = $('.project__wrap').attr('data-role');\n        $('input[name=\"task_id\"]').val(task_id)\n\n        let obj = { action: 'append-clarify-info', task_id, role };\n        $.ajax({\n            url: '/wp-admin/admin-ajax.php',\n            data: obj,\n            method: 'POST',\n            success: function (res) {\n                console.log('success ajax-append');\n                $('.project__table-clarify').replaceWith(res);\n            },\n            error: function (error) {\n                console.log('error ajax-append');\n                $('.project__table-clarify').replaceWith(res);\n            }\n        });\n\n\n        $('.task').each(function (){\n\n            if($(this).attr('data-taskId') == task_id){\n                let info = $(this).find('.project__task ');\n                // let task_id = $(this).attr('data-taskId');\n                $('input[name=\"task_id\"]').val(task_id)\n\n                let desc = info.data('desc');\n                let template = info.data('template_link');\n                let img = info.data('img');\n                let managers = info.data('manager').split(',');\n                let number1 = info.closest('tr').index() + 1;\n                let number2 = info.closest('td').index();\n                let part1 = info.closest('tr').find('.project__task-step h3').text();\n                let part2 = info.find('.project__task-title').text();\n\n                let managerList = '';\n                managers.forEach(function (manager) {\n                    managerList += '<span>' + manager.trim() + '</span>';\n                });\n\n                $('.project__manager-list').html(managerList);\n                $('.modal .project__top-template').attr('href', template);\n                $('.modal .project__top-icon img').attr('src', img);\n                $('.project__modal-desc p').text(desc);\n                $('.project__modal-title').html(`<span>Stage ${number1}. ${part1}</span>Step ${number2}. ${part2}`);\n            }\n        })\n\n\n        modal.show();\n\n        addMoreFile();\n\n\n\n        closeModal(modal)\n    }\n}\n$(document).ready(function () {\n    loginPopupChange();\n    deleteJustUploadFile();\n    let loginForm = $('.login__signin');\n    validateForm(loginForm, function () {\n        ajaxSend(loginForm, function (res){\n            window.location.href = res.data.redirect_url;\n        }, function (error){\n            let errorrr =  error.responseJSON.data.error\n\n            $('.login__signin').append(`<p class=\"login__signin-error\">${errorrr}</p>`)\n            setTimeout(function (){\n                $('.login__signin-error').remove()\n            },3000)\n        });\n\n    });\n\n    let loginForget = $('.login__form-forget');\n    validateForm(loginForget, function () {\n        ajaxSend(loginForget, function () {\n            $('.login__form-forget').removeClass('active');\n            $('.login__form-success').addClass('active');\n\n        }, function (error){\n            let errorrr =  error.responseJSON.data[0]\n            $('.login__form-forget').append(`<p class=\"login__signin-error\">${errorrr}</p>`)\n            setTimeout(function (){\n                $('.login__signin-error').remove()\n            },3000)\n        });\n    });\n\n    let passwordReset = $('.login__form-recovery');\n    validateForm(passwordReset, function () {\n        ajaxSend(passwordReset, function (res){\n            window.location.href = res.data.redirect_url;\n        }, function (error){\n            let errorrr =  error.responseJSON.data[0]\n            $('.login__form-recovery').append(`<p class=\"login__signin-error\">${errorrr}</p>`)\n            setTimeout(function (){\n                $('.login__signin-error').remove()\n            },3000)\n        });\n    });\n\n    progressBar();\n    addPercentStyle();\n    changeMob();\n    toogleModal($('.notes__button'), $('.modal__notes'));\n    toogleModal($('.notes__top-edit'), $('.modal__notes'));\n\n    if ($('.project__wrap').attr('data-role') == 'manager') {\n        toogleModal($('.project__table-task .clarify'), $('.modal__manager'));\n        toogleModal($('.project__table-task .accept'), $('.modal__manager'));\n    } else {\n        toogleModal($('.project__table-task .clarify'), $('.modal__task-clarify'));\n        toogleModal($('.project__table-task .accept'), $('.modal__task-clarify'));\n        toogleModal($('.project__table-task .reject'), $('.modal__task'));\n    }\n\n    toogleModal($('.notes__file-delete'), $('.modal__delete'));\n    toogleModal($('.notes__top-delete'), $('.modal__delete'));\n\n    $('.file-input').on('change', function (event) {\n        let fileList = event.target.files;\n\n        updateFileListDisplay(fileList);\n    });\n\n    submitFormDataNotes('.form__notes');\n    submitFormDataProject('.form__task');\n\n    tab();\n    $('.header__burger').on('click', openMenu);\n    deleteFileFromModal('.project__clarify-delete', $('.modal__content-delete'));\n    approveFile('.project__approve-manager > *', $('.modal__content-approve'));\n    showSearch();\n    loadMore('more_project', '.project__wrap .load__more');\n    loadMore('more_notification', '.notification__wrap .load__more');\n    showMobTask('.project__table-task', 'tr', '.project__task-prev', '.project__task-next');\n    showMobTask('.clarify__mob-wrap', 'tbody', '.clarify__mob-prev', '.clarify__mob-next');\n    uploadAndDeleteFiles();\n    openModalFromEmail()\n    showLogOut()\n    showInstruction()\n});\n\n$(window).load(function () {});\n\n$(window).resize(function () {});\n$(window).scroll(function () {});\n//# sourceMappingURL=index.js.map\n"]}